<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Hub API</title>

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/monokai-sublime.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand navbar-right hidden-xs" href="https://doc.perinatologie.nl">
                <img src="https://www.perinatologie.nl/assets/img/perinatologie.nl.png" style="width: 40px; float: left; margin-right: 5px;" />
                doc.perinatologie.nl
            </a>
            <a class="navbar-brand" href="./">
                Hub API
                <small class="hidden-xs hidden-sm">
                    Implementatie handleiding
                </small>
            </a>
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                                                                                                        <a href="./">
                                                                                                                    Inleiding
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="authenticatie.html">
                                                                                                                    Authenticatie
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="transport.html">
                                                                                                                    Transport
                                    </a>
                                </li>
                                                            <li class="active">
                                                                                                                        <a href="retrieving-resources.html">
                                                                                                                    Resources ophalen
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-resources.html">
                                                                                                                    List resources
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-resource.html">
                                                                                                                    Get resource
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-resource-source.html">
                                                                                                                    Get resource source
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-resource-shares.html">
                                                                                                                    Get resource shares
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-register.html">
                                                                                                                    Register
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-share-add.html">
                                                                                                                    Share add
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-share-remove.html">
                                                                                                                    Share remove
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                   <h2 id="opvragen-dossier-bij-doelsysteem">Opvragen dossier bij doelsysteem</h2>
<p>De hub geeft voor elke resource een source element terug. Deze source bevat een URL en een JWT. Deze informatie kan vervolgens gebruikt worden om een volledige en actuele versie van het dossier op te halen bij de provider van het betreffende resource.</p>
<p>De bevrager kan een HTTPS GET request uitvoeren naar de URL die ontvangen is door de Hub. Hieraan wordt als Query parameter de JWT toegevoegd.
Bijvoorbeeld:</p>
<ul>
<li><a href="https://api.example.com/dossierapi/12345/G3?jwt">https://api.example.com/dossierapi/12345/G3?jwt</a>=....</li>
</ul>
<p>Zie voorgaande hoofdstukken voor de claims die in het JWT zijn ge-encodeerd.</p>
<p>Bij het implementeren van de provider api is het van groot belang dat de provider de JWT valideerd mbv de public key van de Hub, en dat daarnaast de claims ook worden gevalideerd.</p>
<ul>
<li>De waarde van iss moet <a href="https://hub.perinatologie.nl">https://hub.perinatologie.nl</a> zijn.</li>
<li>De waarde van aud moet het accountname van de provider zijn (anders kan een geldig JWT bij een andere provider worden gebruikt om data van een bepaald BSN op te vragen).</li>
<li>De waarde van sub moet overeenkomen met het opgevraagde BSN in de URL (anders kan mbv een andere URL een andere resource data opgehaald worden)</li>
<li>nbf en exp dienen gecontroleerd te worden (anders kan op een later tijdstip dezelfde JWT gebruikt worden). Het is te adviseren de API server klokken te synchroniseren.</li>
<li>acc_name en acc_displayname zijn ter info voor logging bij de provider.</li>
</ul>
<h2 id="bron-data-formaat">Bron data formaat</h2>
<p>Het formaat van de data die teruggegeven zal worden door de provider op de genoemde URL wordt bepaald door het resource type.</p>
<p>In geval van resource type <code>perinatologie/dossier</code> is dit het door leveranciers overeengekomen formaat “Form XML”.</p>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    <a href="https://www.perinatologie.nl">perinatologie.nl</a>
                </p>
            </div>

                            <a class="github-link" href="https://github.com/perinatologie/hub-api-v3-doc">
                    <i class="fa fa-github"></i>
                    Dit document is open-source, bijdragen kan via github.
                </a>
            
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
